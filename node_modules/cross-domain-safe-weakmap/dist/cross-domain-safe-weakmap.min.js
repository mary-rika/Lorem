!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("xdsweakmap",[],r):"object"==typeof exports?exports.xdsweakmap=r():e.xdsweakmap=r()}("undefined"!=typeof self?self:this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s="./src/index.js")}({"./node_modules/cross-domain-utils/src/index.js":function(e,r,t){"use strict";function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===H.FILE_PROTOCOL}function i(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===H.ABOUT_PROTOCOL}function o(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function a(e){if(e&&!o(e))try{return e.opener}catch(e){}}function u(e){try{return(0,G.noop)(e&&e.location&&e.location.href),!0}catch(e){}return!1}function c(e){var r=e.location;if(!r)throw new Error("Can not read window location");var t=r.protocol;if(!t)throw new Error("Can not read window protocol");if(t===H.FILE_PROTOCOL)return H.FILE_PROTOCOL+"//";if(t===H.ABOUT_PROTOCOL){var n=o(e);return n&&u(e)?c(n):H.ABOUT_PROTOCOL+"//"}var i=r.host;if(!i)throw new Error("Can not read window host");return t+"//"+i}function f(e){e=e||window;var r=c(e);return r&&e.mockDomain&&0===e.mockDomain.indexOf(H.MOCK_PROTOCOL)?e.mockDomain:r}function s(e){try{if(!e.location.href)return!0;if("about:blank"===e.location.href)return!0}catch(e){}return!1}function l(e){try{if(e===window)return!0}catch(e){}try{var r=Object.getOwnPropertyDescriptor(e,"location");if(r&&!1===r.enumerable)return!1}catch(e){}try{if(i(e)&&u(e))return!0}catch(e){}try{if(c(e)===c(window))return!0}catch(e){}return!1}function d(e){if(!l(e))return!1;try{if(e===window)return!0;if(i(e)&&u(e))return!0;if(f(window)===f(e))return!0}catch(e){}return!1}function h(e){var r=[];try{for(;e.parent!==e;)r.push(e.parent),e=e.parent}catch(e){}return r}function p(e,r){if(!e||!r)return!1;var t=o(r);return t?t===e:-1!==h(r).indexOf(e)}function v(e){var r=[],t=void 0;try{t=e.frames}catch(r){t=e}var n=void 0;try{n=t.length}catch(e){}if(0===n)return r;if(n){for(var i=0;i<n;i++){var o=void 0;try{o=t[i]}catch(e){continue}r.push(o)}return r}for(var a=0;a<100;a++){var u=void 0;try{u=t[a]}catch(e){return r}if(!u)return r;r.push(u)}return r}function y(e){for(var r=[],t=v(e),n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if(i=t.next(),i.done)break;o=i.value}var a=o;r.push(a);for(var u=y(a),c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var s;if(c){if(f>=u.length)break;s=u[f++]}else{if(f=u.next(),f.done)break;s=f.value}var l=s;r.push(l)}}return r}function w(e){if(e){try{if(e.top)return e.top}catch(e){}if(o(e)===e)return e;try{if(p(window,e)&&window.top)return window.top}catch(e){}try{if(p(e,window)&&window.top)return window.top}catch(e){}for(var r=y(e),t=Array.isArray(r),n=0,r=t?r:r[Symbol.iterator]();;){var i;if(t){if(n>=r.length)break;i=r[n++]}else{if(n=r.next(),n.done)break;i=n.value}var a=i;try{if(a.top)return a.top}catch(e){}if(o(a)===a)return a}}}function m(e){var r=w(e);return y(r).concat(r)}function g(e){return e===w(e)}function k(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var r=e.ownerDocument;return!(!r||!r.body||r.body.contains(e))}function O(e,r){for(var t=0;t<e.length;t++)try{if(e[t]===r)return t}catch(e){}return-1}function b(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==Q}if(r&&d(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}try{(0,G.noop)(e===e)}catch(e){return!0}var t=O(V,e);if(-1!==t){var n=X[t];if(n&&k(n))return!0}return!1}function _(){for(var e=0;e<X.length;e++)k(X[e])&&(X.splice(e,1),V.splice(e,1));for(var r=0;r<V.length;r++)b(V[r])&&(X.splice(r,1),V.splice(r,1))}function x(e){if(_(),e&&e.contentWindow)try{V.push(e.contentWindow),X.push(e)}catch(e){}}function A(e){return e=e||window,e.navigator.mockUserAgent||e.navigator.userAgent}function W(e,r){for(var t=v(e),n=t,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}var u=a;try{if(d(u)&&u.name===r&&-1!==t.indexOf(u))return u}catch(e){}}try{if(-1!==t.indexOf(e.frames[r]))return e.frames[r]}catch(e){}try{if(-1!==t.indexOf(e[r]))return e[r]}catch(e){}}function j(e,r){var t=W(e,r);if(t)return t;for(var n=v(e),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}var u=a,c=j(u,r);if(c)return c}}function P(e,r){var t=void 0;return(t=W(e,r))?t:j(w(e)||e,r)}function C(e,r){var t=o(r);if(t)return t===e;for(var n=v(e),i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var u;if(i){if(a>=n.length)break;u=n[a++]}else{if(a=n.next(),a.done)break;u=a.value}if(u===r)return!0}return!1}function T(e,r){return e===a(r)}function M(e){e=e||window;var r=a(e);if(r)return r;var t=o(e);return t||void 0}function S(e){for(var r=[],t=e;t;)(t=M(t))&&r.push(t);return r}function R(e,r){var t=M(r);if(t)return t===e;if(r===e)return!1;if(w(r)===r)return!1;for(var n=v(e),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}if(a===r)return!0}return!1}function D(){return Boolean(a(window))}function F(){return Boolean(o(window))}function L(){return Boolean(!F()&&!D())}function E(e,r){for(var t=e,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if(i=t.next(),i.done)break;o=i.value}for(var a=o,u=r,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var s;if(c){if(f>=u.length)break;s=u[f++]}else{if(f=u.next(),f.done)break;s=f.value}if(a===s)return!0}}return!1}function I(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,r=0,t=e;t;)(t=o(t))&&(r+=1);return r}function B(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e,n=0;n<r;n++){if(!t)return;t=o(t)}return t}function N(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return B(e,I(e)-r)}function U(e,r){var t=w(e)||e,n=w(r)||r;try{if(t&&n)return t===n}catch(e){}var i=m(e),o=m(r);if(E(i,o))return!0;var u=a(t),c=a(n);return(!u||!E(m(u),o))&&(c&&E(m(c),i),!1)}function z(e,r){if("string"==typeof e){if("string"==typeof r)return e===H.WILDCARD||r===e;if((0,G.isRegex)(r))return!1;if(Array.isArray(r))return!1}return(0,G.isRegex)(e)?(0,G.isRegex)(r)?e.toString()===r.toString():!Array.isArray(r)&&Boolean(r.match(e)):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!(0,G.isRegex)(r)&&e.some(function(e){return z(e,r)}))}function J(e){var r=void 0;return e.match(/^(https?|mock|file):\/\//)?(r=e,r=r.split("/").slice(0,3).join("/")):f()}function K(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=void 0;return function o(){if(b(e))return i&&clearTimeout(i),r();n<=0?clearTimeout(i):(n-=t,i=setTimeout(o,t))}(),{cancel:function(){i&&clearTimeout(i)}}}function q(e){try{if(e===window)return!0}catch(e){if(e&&e.message===Q)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===Q)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===Q)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===Q)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===Q)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===Q)return!0}try{(0,G.noop)(e===e)}catch(e){return!0}try{(0,G.noop)(e&&e.__cross_domain_utils_window_check__)}catch(e){return!0}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.isFileProtocol=n,r.isAboutProtocol=i,r.getParent=o,r.getOpener=a,r.canReadFromWindow=u,r.getActualDomain=c,r.getDomain=f,r.isBlankDomain=s,r.isActuallySameDomain=l,r.isSameDomain=d,r.getParents=h,r.isAncestorParent=p,r.getFrames=v,r.getAllChildFrames=y,r.getTop=w,r.getAllFramesInWindow=m,r.isTop=g,r.isFrameWindowClosed=k,r.isWindowClosed=b,r.linkFrameWindow=x,r.getUserAgent=A,r.getFrameByName=W,r.findChildFrameByName=j,r.findFrameByName=P,r.isParent=C,r.isOpener=T,r.getAncestor=M,r.getAncestors=S,r.isAncestor=R,r.isPopup=D,r.isIframe=F,r.isFullpage=L,r.getDistanceFromTop=I,r.getNthParent=B,r.getNthParentFromTop=N,r.isSameTopWindow=U,r.matchDomain=z,r.getDomainFromUrl=J,r.onCloseWindow=K,r.isWindow=q;var G=t("./node_modules/cross-domain-utils/src/util.js"),H={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},Q="Call was rejected by callee.\r\n",V=[],X=[]},"./node_modules/cross-domain-utils/src/util.js":function(e,r,t){"use strict";function n(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function i(){}Object.defineProperty(r,"__esModule",{value:!0}),r.isRegex=n,r.noop=i},"./src/index.js":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./src/interface.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(n);r.default=i},"./src/interface.js":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./src/weakmap.js");Object.defineProperty(r,"WeakMap",{enumerable:!0,get:function(){return n.CrossDomainSafeWeakMap}})},"./src/native.js":function(e,r,t){"use strict";function n(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,r={};return window.Object.freeze(r),e.set(r,"__testvalue__"),"__testvalue__"===e.get(r)}catch(e){return!1}}Object.defineProperty(r,"__esModule",{value:!0}),r.hasNativeWeakMap=n},"./src/util.js":function(e,r,t){"use strict";function n(e,r){for(var t=0;t<e.length;t++)try{if(e[t]===r)return t}catch(e){}return-1}function i(){}Object.defineProperty(r,"__esModule",{value:!0}),r.safeIndexOf=n,r.noop=i},"./src/weakmap.js":function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.CrossDomainSafeWeakMap=void 0;var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=t("./node_modules/cross-domain-utils/src/index.js"),a=t("./src/native.js"),u=t("./src/util.js"),c=Object.defineProperty,f=Date.now()%1e9;r.CrossDomainSafeWeakMap=function(){function e(){if(n(this,e),f+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+f,(0,a.hasNativeWeakMap)())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return i(e,[{key:"_cleanupClosedWindows",value:function(){for(var e=this.weakmap,r=this.keys,t=0;t<r.length;t++){var n=r[t];if((0,o.isWindow)(n)&&(0,o.isWindowClosed)(n)){if(e)try{e.delete(n)}catch(e){}r.splice(t,1),this.values.splice(t,1),t-=1}}}},{key:"isSafeToReadWrite",value:function(e){if((0,o.isWindow)(e))return!1;try{(0,u.noop)(e&&e.self),(0,u.noop)(e&&e[this.name])}catch(e){return!1}return!0}},{key:"set",value:function(e,r){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.set(e,r)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=this.name,i=e[n];i&&i[0]===e?i[1]=r:c(e,n,{value:[e,r],writable:!0})}else{this._cleanupClosedWindows();var o=this.keys,a=this.values,f=(0,u.safeIndexOf)(o,e);-1===f?(o.push(e),a.push(r)):a[f]=r}}},{key:"get",value:function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{if(r.has(e))return r.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var t=this.keys,n=(0,u.safeIndexOf)(t,e);if(-1===n)return;return this.values[n]}var i=e[this.name];if(i&&i[0]===e)return i[1]}},{key:"delete",value:function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];t&&t[0]===e&&(t[0]=t[1]=void 0)}else{this._cleanupClosedWindows();var n=this.keys,i=(0,u.safeIndexOf)(n,e);-1!==i&&(n.splice(i,1),this.values.splice(i,1))}}},{key:"has",value:function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{return r.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];return!(!t||t[0]!==e)}return this._cleanupClosedWindows(),-1!==(0,u.safeIndexOf)(this.keys,e)}}]),e}()}})});
//# sourceMappingURL=cross-domain-safe-weakmap.min.js.map
//# sourceMappingURL=cross-domain-safe-weakmap.min.js.map